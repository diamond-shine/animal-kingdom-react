(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{249:function(e,t,a){e.exports=a(590)},254:function(e,t,a){},255:function(e,t,a){},265:function(e,t){},266:function(e,t){},286:function(e,t){},288:function(e,t){},509:function(e,t){},579:function(e,t,a){},580:function(e,t,a){},581:function(e,t,a){},584:function(e,t,a){},585:function(e,t,a){},586:function(e,t,a){},587:function(e,t,a){},590:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(248),c=a.n(i),l=a(594),s=(a(254),a(12)),o=a(13),p=a(15),m=a(14),u=a(16),d=(a(255),a(28)),h=new d.AppConfig(["store_write","publish_data"]),k=[{id:"cat",name:"Cat",superpower:"Has 9 lives."},{id:"dog",name:"Dog",superpower:"Catching frisbees."},{id:"lion",name:"Lion",superpower:"Roaring loudly."}],b=[{id:"forest",name:"Forest",superpower:"Trees!"},{id:"tundra",name:"Tundra",superpower:"Let it snow!"}],f="me.json",y="subjects.json",g=[{app:"https://animal-kingdom-1.firebaseapp.com",ruler:"larry.id"},{app:"http://localhost:3001",ruler:"larz.id"},{app:"https://decentralised-islands.netlify.com",ruler:"yannael_leborgne.id"},{app:"https://nervous-johnson-e8758f.netlify.com",ruler:"harshkedia.id"},{app:"https://thirsty-jang-0c0a17.netlify.com",ruler:"ma1222042.id.blockstack"},{app:"https://elastic-yalow-5d7c5a.netlify.com",ruler:"kkomaz.id"},{app:"https://valsanimalkingdom.netlify.com",ruler:"valentin.blockstack.id"},{app:"https://dazzling-mclean-3dd6e2.netlify.com",ruler:"salil_gtm.id.blockstack"},{app:"https://optimistic-kepler-bb37b2.netlify.com",ruler:"sagarchoudhary96.id.blockstack"},{app:"https://mystifying-bardeen-983642.netlify.com",ruler:"rattle99.id.blockstack"},{app:"https://stoic-leavitt-d86356.netlify.com",ruler:"azizahmed.id.blockstack"},{app:"https://frosty-leakey-8a24d2.netlify.com",ruler:"superbadpeter.id.blockstack"},{app:"https://gallant-sinoussi-734e73.netlify.com",ruler:"ginxh.id.blockstack"},{app:"https://trusting-haibt-e87237.netlify.com",ruler:"charlied.id.blockstack"},{app:"https://dazzling-ptolemy-1e1411.netlify.com",ruler:"fivebyfive.id.blockstack"},{app:"https://planet.friedger.de",ruler:"friedger.id"},{app:"https://animal-kingdom.djnicholson.com",ruler:"djnicholson.id.blockstack"},{app:"https://vigilant-goldberg-43a99e.netlify.com",ruler:"samuelescarigo.id.blockstack"},{app:"https://condescending-wright-e66128.netlify.com",ruler:"lindseywoo.id.blockstack"},{app:"https://trusting-stonebraker-af1ebc.netlify.com",ruler:"ngerald51.id.blockstack"},{app:"https://stoic-williams-909dc6.netlify.com",ruler:"kimsk112.id.blockstack"},{app:"https://elastic-dijkstra-9f34ef.netlify.com",ruler:"csilverman.id.blockstack"},{app:"https://angry-jepsen-50bb19.netlify.com",ruler:"sandyhoover.id"},{app:"https://hopeful-meninsky-92fa7f.netlify.com",ruler:"quiottscuinn.id.blockstack"},{app:"https://cranky-spence-eef5f8.netlify.com",ruler:"fehrnstr.id.blockstack"},{app:"https://focused-roentgen-9b4d74.netlify.com",ruler:"jorishermans.id.blockstack"},{app:"https://reverent-pasteur-a4900c.netlify.com",ruler:"dubiousdog.id.blockstack"},{app:"https://zealous-villani-bb5378.netlify.com",ruler:"jstrnbrg.id.blockstack"},{app:"https://zealous-cray-e48eb6.netlify.com",ruler:"trappier.id.blockstack"},{app:"https://animalkingdom5th.netlify.com",ruler:"5thdimension.id.blockstack"},{app:"https://distracted-saha-09847b.netlify.com",ruler:"anthony_albertorio.id.blockstack"},{app:"https://modest-wescoff-dc0756.netlify.com",ruler:"pantherapardus.id.blockstack"},{app:"https://romantic-perlman-5483a9.netlify.com",ruler:"gopye.id.blockstack"},{app:"flamboyant-galileo-7f43b3.netlify.com",ruler:"livpayawal.id.blockstack"},{app:"https://modest-wescoff-dc0756.netlify.com",ruler:"pantherapardus.id.blockstack"},{app:"https://upbeat-williams-577db4.netlify.com",ruler:"wowbagger59.id.blockstack"},{app:"https://animal-kingdom-lh.netlify.com",ruler:"latenthero.id.blockstack"},{app:"https://confident-northcutt-143b95.netlify.com",ruler:"natthecat.id.blockstack"},{app:"https://amazing-austin-21f33f.netlify.com",ruler:"chodethedryasic.id.blockstack"},{app:"https://sharp-jones-174451.netlify.com",ruler:"Jameshawkinsiii.id"},{app:"https://modest-chandrasekhar-0e9f62.netlify.com",ruler:"ID-1MhuTmakatYQR9tUF2ThtQ9woeCY92eWks"},{app:"https://adoring-yalow-cca026.netlify.com",ruler:"edhenderson.id.blockstack"},{app:"https://hopeful-lamport-75d72a.netlify.com",ruler:"bradyisom.id.blockstack"},{app:"https://world-needs-animals.netlify.com",ruler:"renegmed.id.blockstack"},{app:"https://hopeful-mcclintock-559a85.netlify.com",ruler:"bartonij.id.blockstack"},{app:"https://friendly-goldwasser-192893.netlify.com",ruler:"lbglaves.id.blockstack"},{app:"https://silly-easley-34c111.netlify.com",ruler:"nasireqbal.id.blockstack"},{app:"https://optimistic-wing-7a17ab.netlify.com",ruler:"jamersden.id.blockstack"},{app:"https://zen-yonath-540268.netlify.com",ruler:"olletsoc.id"},{app:"https://quirky-booth-4cee6d.netlify.com",ruler:"vykuntavasu.id.blockstack"},{app:"https://confident-borg-21283f.netlify.com",ruler:"jazken.id.blockstack"},{app:"https://flamboyant-beaver-c71164.netlify.com",ruler:"diego_angelino.id.blockstack"},{app:"https://trusting-kirch-492433.netlify.com",ruler:"rmarchese.id.blockstack"},{app:"https://pensive-tereshkova-29c564.netlify.com",ruler:"nicon00b.id.blockstack"},{app:"https://blissful-hodgkin-6062b1.netlify.com",ruler:"ottoman91.id.blockstack"},{app:"https://relaxed-ptolemy-1e8668.netlify.com",ruler:"beeccc12.id.blockstack"},{app:"https://cranky-bohr-e74e2c.netlify.com",ruler:"jas_blockstack.id.blockstack"},{app:"https://epic-kirch-0d81b5.netlify.com",ruler:"rickevans.id.blockstack"},{app:"https://sharp-leavitt-9ea1d4.netlify.com",ruler:"yashvadhvani.id.blockstack"},{app:"https://eloquent-shockley-791c49.netlify.com",ruler:"nate1010.id.blockstack"},{app:"https://focused-keller-6ed5ac.netlify.com",ruler:"blockstalker.id.blockstack"},{app:"https://blissful-poitras-112429.netlify.com",ruler:"mhmodtayel.id.blockstack"},{app:"https://jovial-almeida-f5569d.netlify.com",ruler:"codeamt11.id.blockstack"},{app:"https://adoring-hamilton-e4d10d.netlify.com",ruler:"brian501.id.blockstack"},{app:"https://naughty-bhaskara-17b05c.netlify.com",ruler:"kkcheng.id.blockstack"},{app:"https://musing-joliot-453693.netlify.com",ruler:"phallvance.id.blockstack"},{app:"https://quirky-bassi-182eff.netlify.com",ruler:"ankianan.id.blockstack"},{app:"https://practical-stallman-b41995.netlify.com",ruler:"watson_anirudh.id.blockstack"},{app:"https://affectionate-jang-749b1b.netlify.com",ruler:"miura0319.id.blockstack"},{app:"https://gallant-volhard-0ab9bf.netlify.com",ruler:"betosmith2000.id.blockstack"},{app:"https://stoic-hawking-dd2218.netlify.com",ruler:"sancho_panza.id.blockstack"},{app:"https://zealous-nightingale-8d6b51.netlify.com",ruler:"anugrahsinghal.id.blockstack"},{app:"https://brave-agnesi-fc7d2b.netlify.com",ruler:"alexsopinka.id.blockstack"},{app:"https://zen-poincare-743126.netlify.com",ruler:"dartman100.id.blockstack"},{app:"https://hopeful-noether-0883fc.netlify.com",ruler:"rajathav.id.blockstack"},{app:"Uhttps://pre-kingdom-336989.netlify.com",ruler:"pschhikara88.id.blockstack"},{app:"https://eloquent-kepler-13171c.netlify.com",ruler:"camperal.id.blockstack"},{app:"https://gracious-elion-08d8b6.netlify.com",ruler:"takatthokinawa.id.blockstack"},{app:"emptywells.id.blockstack",ruler:"emptywells.id.blockstack"},{app:"https://upbeat-mccarthy-43697d.netlify.com",ruler:"seancasey.id.blockstack"},{app:"https://my1stblckapp.netlify.com",ruler:"ahmadreza.id.blockstack"},{app:"https://reverent-newton-f66a3f.netlify.com",ruler:"manank9595.id.blockstack"},{app:"https://hopeful-kirch-f5a0ce.netlify.com",ruler:"jerryjerrygood.id.blockstack"},{app:"https://wizardly-roentgen-791914.netlify.com",ruler:"safe_ware.id.blockstack"},{app:"https://quirky-mcnulty-bc977b.netlify.com",ruler:"devil1331.id.blockstack"},{app:"https://mystifying-tesla-0fc17a.netlify.com",ruler:"acidleroy.id.blockstack"},{app:"https://keen-fermi-c1e5f3.netlify.com",ruler:"nobkovskii.id.blockstack"},{app:"https://wizardly-roentgen-791914.netlify.com",ruler:"safe_ware.id.blockstack"},{app:"https://mystifying-hugle-0685a9.netlify.com",ruler:"sarakawa626.id.blockstack"},{app:"https://hungry-wiles-ddb112.netlify.com",ruler:"ryokomy3.id.blockstack"},{app:"Uhttps://boring-borg-980465.netlify.com",ruler:"kakke18_perry.id.blockstack"},{app:"https://wonderful-benz-f442d5.netlify.com",ruler:"arandoros.id.blockstack"},{app:"https://cocky-spence-96f8bc.netlify.com",ruler:"wildmolasses.id.blockstack"},{app:"https://hopeful-kirch-f5a0ce.netlify.com",ruler:"jerryjerrygood.id.blockstack"},{app:"https://nervous-bardeen-84fa52.netlify.com",ruler:"maozedong.id.blockstack"},{app:"https://gallant-lewin-0565e3.netlify.com",ruler:"petersmurphy7.id.blockstack"},{app:"https://determined-mayer-5da20c.netlify.com",ruler:"dames.id.blockstack"},{app:"https://unruffled-jennings-f51797.netlify.com",ruler:"goashleysu.id.blockstack"},{app:"https://mystifying-montalcini-5975b6.netlify.com",ruler:"octavian.id.blockstack"},{app:"https://silly-joliot-e3dbed.netlify.com",ruler:"thinkverse.id.blockstack"},{app:"https://xenodochial-perlman-eda622.netlify.com",ruler:"dipsyChan.id"},{app:"https://heuristic-villani-a61306.netlify.com",ruler:"leizlsamano.id.blockstack"},{app:"https://jovial-boyd-7f5f10.netlify.com",ruler:"omgitsgod.id.blockstack"},{app:"https://naughty-williams-f3fae0.netlify.com",ruler:"aspampinato.id.blockstack"},{app:"https://awesome-allen-b964c2.netlify.com",ruler:"umairisrar.id.blockstack"},{app:"https://animalskingdoms.netlify.com",ruler:"robertchendev.id.blockstack"},{app:"https://naughty-euclid-5ef4db.netlify.com",ruler:"jefreybulla.id.blockstack"},{app:"https://practical-wozniak-8d76bd.netlify.com",ruler:"georgety.id.blockstack"},{app:"https://eager-snyder-3ee638.netlify.com",ruler:"saigedruid.id.blockstack"},{app:"https://pensive-swirles-b2da89.netlify.com",ruler:"botagranate.id.blockstack"},{app:"https://angry-murdock-a2700c.netlify.com",ruler:"jayankamdar.id.blockstack"},{app:"https://wonderful-noyce-e06ea4.netlify.com",ruler:"samrajmoorjani.id.blockstack"},{app:"https://hopeful-blackwell-a3f249.netlify.com",ruler:"eselbeus.id.blockstack"},{app:"https://sn-animal-kingdom.netlify.com",ruler:"snmediaworks.id.blockstack"},{app:"https://animal-kingdom.netlify.com",ruler:"yasirahk.id.blockstack"},{app:"https://elegant-mestorf-759375.netlify.com",ruler:"danparamo.id.blockstack"},{app:"https://stupefied-shannon-286386.netlify.com",ruler:"meteorologisk.id.blockstack"},{app:"https://laughing-goldstine-172136.netlify.com",ruler:"wiljagocook.id.blockstack"},{app:"https://youthful-snyder-19f045.netlify.com",ruler:"gitanshu.id.blockstack"},{app:"https://cocky-heyrovsky-d586ee.netlify.com",ruler:"gunillaz.id.blockstack"},{app:"https://stoic-raman-89864e.netlify.com",ruler:"adrianda.id.blockstack"},{app:"https://musing-allen-c4cbd0.netlify.com",ruler:"dinolaur.id.blockstack"},{app:"https://eager-goodall-d3f5e2.netlify.com",ruler:"davina2019.id.blockstack"},{app:"https://festive-benz-709427.netlify.com",ruler:"superkaa.id.blockstack"},{app:"https://priceless-noyce-5b2a91.netlify.com",ruler:"nicsmith.id.blockstack"},{app:"https://raquels-animal-kingdom.netlify.com",ruler:"saekit808.id.blockstack"},{app:"https://epic-yalow-f35449.netlify.com",ruler:"vrajeshkanna.id.blockstack"},{app:"https://thirsty-kepler-7d0fbe.netlify.com",ruler:"andrewttran.id.blockstack"},{app:"https://affectionate-kilby-515d7c.netlify.com",ruler:"silveroy.id.blockstack"},{app:"https://heuristic-franklin-f1ad06.netlify.com",ruler:"khaleddell.id.blockstack"},{app:"https://eager-boyd-c9beb0.netlify.com",ruler:"kelceywilson.id.blockstack"},{app:"https://elated-tereshkova-5fecd7.netlify.com",ruler:"jsimon98"},{app:"https://elastic-pike-f6a886.netlify.com",ruler:"amqzong1.id.blockstack"},{app:"https://cocky-montalcini-e9b713.netlify.com",ruler:"srinivasan.id.blockstack"},{app:"https://tender-darwin-76d1ac.netlify.com",ruler:"ctxzzzzz.id.blockstack"},{app:"https://pensive-raman-fd2bbf.netlify.com",ruler:"coyotenxs.id.blockstack"},{app:"https://inspiring-goldwasser-7a68cd.netlify.com",ruler:"transistor.id.blockstack"},{app:"https://determined-hoover-e3a87a.netlify.com",ruler:"daveharry.id.blockstack"},{app:"https://priceless-wilson-8e57b1.netlify.com",ruler:"michaelw.id.blockstack"},{app:"https://awesome-goldberg-dfb7f2.netlify.com",ruler:"acecauis.id.blockstack"},{app:"https://practical-fermat-f46a63.netlify.com",ruler:"emilsergiev.id.blockstack"},{app:"https://gallant-feynman-7d2107.netlify.com",ruler:"jnermano.id.blockstack"},{app:"https://confident-curran-bc4f99.netlify.com",ruler:"andrewtruex.id.blockstack"},{app:"https://musing-jennings-9a8c76.netlify.com",ruler:"voiceappstudio.id.blockstack"},{app:"https://eager-galileo-36deaa.netlify.com",ruler:"mlambo2019.id.blockstack"},{app:"https://compassionate-heyrovsky-c539c0.netlify.com",ruler:"hongily25.id.blockstack"},{app:"https://sad-albattani-b59b7a.netlify.com",ruler:"jonathanerlich.id.blockstack"},{app:"https://suspicious-heisenberg-ef115b.netlify.com",ruler:"lorenzob.id.blockstack"},{app:"https://epic-murdock-ed407f.netlify.com",ruler:"wilfred8.id.blockstack"},{app:"https://quizzical-hamilton-c15107.netlify.com",ruler:"eamongwalsh.id"},{app:"https://brave-torvalds-530c16.netlify.com",ruler:"jedsada_tiwongvorakul.id.blockstack"},{app:"https://infallible-goodall-e2a786.netlify.com",ruler:"rajathav.id.blockstack"},{app:"https://pensive-fermat-b94acf.netlify.com",ruler:"sujeethav02.id.blockstack"},{app:"https://competent-ramanujan-21dc0b.netlify.com",ruler:"juancabello.id.blockstack"},{app:"https://xenodochial-goldberg-1bc549.netlify.com",ruler:"ctrlaltdileep.id.blockstack"},{app:"https://sharp-fermi-ec89a5.netlify.com",ruler:"josegabriel.id.blockstack"},{app:"https://nervous-nightingale-8054b6.netlify.com",ruler:"iswistore.id.blockstack"},{app:"https://practical-joliot-6c77e0.netlify.com",ruler:"robertwilliamallen.id"},{app:"https://rorysanimalkingdoms.netlify.com",ruler:"rorychristianmurray.id.blockstack"},{app:"https://modest-yalow-9aa5aa.netlify.com",ruler:"greyingraven.id.blockstack"},{app:"https://goofy-fermi-447c0b.netlify.com",ruler:"discover.id.blockstack"},{app:"https://kind-hermann-d712d6.netlify.com",ruler:"hatskier.id.blockstack"},{app:"https://trusting-mcnulty-014bea.netlify.com",ruler:"georgiokg10.id.blockstack"},{app:"https://romantic-wright-331655.netlify.com",ruler:"chrisigbojekwe.id.blockstack"},{app:"https://festive-minsky-399ea0.netlify.com",ruler:"briancottrell.id.blockstack"},{app:"https://suspicious-shockley-b6d288.netlify.com",ruler:"danosaur98.id.blockstack"},{app:"https://agitated-meitner-876cf1.netlify.com",ruler:"tinkerbell.id.blockstack"},{app:"https://sad-wilson-2f844e.netlify.com",ruler:"slamtrade.id.blockstack"},{app:"https://inspiring-minsky-09ac2d.netlify.com",ruler:"xbiospace1.id.blockstack"},{app:"https://dreamy-noether-0952b6.netlify.com",ruler:"0xxx99xxx0.id.blockstack"},{app:"https://titania.netlify.com",ruler:"runefar1.id.blockstack"},{app:"https://focused-engelbart-811df4.netlify.com",ruler:"siracharr.id.blockstack"},{app:"https://fervent-lovelace-879be0.netlify.com",ruler:"edhp4n1k.id.blockstack"},{app:"https://peaceful-brahmagupta-de4632.netlify.com",ruler:"devstack.id.blockstack"},{app:"https://vibrant-mestorf-c07df8.netlify.com",ruler:"scalish.id.blockstack"},{app:"https://sad-golick-7cf29e.netlify.com",ruler:"davidshq.id.blockstack"},{app:"https://sad-bhabha-656055.netlify.com",ruler:"otterthedog.id.blockstack"},{app:"https://elegant-ardinghelli-75ae9a.netlify.com",ruler:"andrasfeher.id.blockstack"}],v=(a(579),function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(p.a)(this,Object(m.a)(t).call(this))).userSession=new d.UserSession({appConfig:h}),e}return Object(u.a)(t,e),Object(o.a)(t,[{key:"signIn",value:function(e){e.preventDefault(),this.userSession.redirectToSignIn()}},{key:"render",value:function(){return r.a.createElement("div",{className:"Landing"},r.a.createElement("div",{className:"form-signin"},r.a.createElement("h1",{className:"h1 mb-3 font-weight-normal"},"Animal Kingdom"),r.a.createElement("button",{className:"btn btn-lg btn-primary btn-block",onClick:this.signIn.bind(this)},"Sign in with Blockstack")))}}]),t}(n.Component)),j=a(20),w=a(593),E=a(595),O=a(596),S=a(592),N=(a(580),a(581),function(e){function t(){return Object(s.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.selected,t=this.props.path,a=this.props.item,n=this.props.select;return r.a.createElement("div",{className:"card ".concat(e?"border-primary":""),onClick:function(e){return n(e,a)}},r.a.createElement("img",{className:"card-img-top",src:"".concat(t).concat(a.id,".jpg"),alt:a.name}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",{className:"card-title"},a.name),r.a.createElement("p",{className:"card-text"},a.superpower),r.a.createElement("button",{className:"btn btn-primary btn-block",disabled:e},e?"Selected":"Select")))}}]),t}(n.Component)),A=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).selectAnimal=a.selectAnimal.bind(Object(j.a)(a)),a.selectTerritory=a.selectTerritory.bind(Object(j.a)(a)),a.state={selectedAnimal:!1,selectedTerritory:!1},a.loadMe=a.loadMe.bind(Object(j.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.loadMe()}},{key:"loadMe",value:function(){this.props.me?this.setState({selectedAnimal:!0,selectedTerritory:!0}):this.setState({selectedAnimal:!1,selectedTerritory:!1})}},{key:"selectAnimal",value:function(e,t){e.preventDefault(),this.setState({selectedAnimal:!0}),this.props.saveMe(Object.assign({},this.props.me,{animal:t}))}},{key:"selectTerritory",value:function(e,t){e.preventDefault(),this.setState({selectedTerritory:!0}),this.props.saveMe(Object.assign({},this.props.me,{territory:t}))}},{key:"render",value:function(){var e=this,t=this.props.me,a=null,n=null;t&&(a=this.props.me.animal,n=this.props.me.territory);var i=this.state.selectedAnimal,c=this.state.selectedTerritory,l=i&&c,s=this.props.username;return r.a.createElement("div",{className:"EditMe container"},r.a.createElement("h2",null,"Your animal persona"),r.a.createElement("p",null,"You are the ruler of your kingdom! Pick your animal persona and its home!"),r.a.createElement("h3",null,"Select your animal"),r.a.createElement("div",{className:"row card-deck"},k.map(function(t,n){var i=a&&a.id===t.id;return r.a.createElement(N,{path:"/animals/",key:n,item:t,select:e.selectAnimal,selected:i})})),r.a.createElement("h3",{className:"select-territory"},"Select your territory"),r.a.createElement("div",{className:"card-deck"},b.map(function(t,a){var i=n&&n.id===t.id;return r.a.createElement(N,{path:"/territories/",key:a,item:t,select:e.selectTerritory,selected:i})})),r.a.createElement("div",{className:"container row"},r.a.createElement("div",{className:"col-lg-12 done"},r.a.createElement("p",null,r.a.createElement(S.a,{to:l?"/kingdom/".concat(s):"/me",className:"btn btn-primary"},"Done")))))}}]),t}(n.Component);function z(e){return JSON.parse(JSON.stringify(e))}function C(e,t,a){a.map(function(n,r){var i={decrypt:!1,app:n.app,username:n.username};return t.getFile(f,i).then(function(t){return t?(a[r]=Object.assign({},n,{missing:!1},JSON.parse(t)),e.setState({subjects:a}),a):(a[r]=Object.assign({},n,{missing:!0}),e.setState({subjects:a}),a)})})}function x(e,t,a){var n={decrypt:!1,username:t,app:a};return e.getFile(f,n).then(function(e){if(e)return JSON.parse(e);return null})}function M(e,t,a){var n={decrypt:!1,username:t,app:a};return e.getFile(y,n).then(function(e){return e?JSON.parse(e):[]})}var T=function(e){function t(){return Object(s.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.index,a=this.props.subject.username,n=this.props.selected,i=this.props.subject.app,c=this.props.subject.animal,l=this.props.myKingdom,s=this.props.currentUsername;return c?r.a.createElement("div",{className:"card ".concat(n?"border-primary":"")},r.a.createElement("img",{className:"card-img-top",src:"".concat(i,"/animals/").concat(c.id,".jpg"),alt:c.name}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",{className:"card-title"},a," the ",c.name),r.a.createElement("p",{className:"card-text"},c.superpower,r.a.createElement("br",null),"It hails from the planet ",i,"."),l?r.a.createElement("button",{className:"btn btn-primary btn-block",onClick:function(a){return e.props.removeSubject(a,t)}},"Banish from kingdom"):r.a.createElement("a",{className:"btn btn-primary btn-block",href:"".concat(window.location.origin,"/kingdom/").concat(s,"?add=").concat(i,"/kingdom/").concat(a)},"Add to my kingdom"))):null}}]),t}(n.Component),K=(a(584),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={ruler:{animal:{},territory:{}},subjects:[],value:"",app:"".concat(e.protocol,"//").concat(e.realm),rulerUsername:e.ruler,clickAdd:!1},a.userSession=new d.UserSession({appConfig:h}),a.addSubject=a.addSubject.bind(Object(j.a)(a)),a.removeSubject=a.removeSubject.bind(Object(j.a)(a)),a.handleChange=a.handleChange.bind(Object(j.a)(a)),a.loadKingdom=a.loadKingdom.bind(Object(j.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this.state.app,t=this.props.ruler;this.loadKingdom(t,e);var a=window.location.search;if(a){var n=a.split("=")[1];this.setState({value:n,clickAdd:!0})}}},{key:"componentWillReceiveProps",value:function(e){var t=e.subjects;t&&(t.length!==this.state.subjects.length&&this.setState({subjects:z(t)}),C(this,this.userSession,t))}},{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"loadKingdom",value:function(e,t){var a=this;x(this.userSession,e,t).then(function(e){e&&a.setState({ruler:e})}),M(this.userSession,e,t).then(function(e){a.setState({subjects:e}),C(a,a.userSession,e)})}},{key:"addSubject",value:function(e){e.preventDefault();var t=function(e){var t=e.split("/kingdom");return{app:t[0],username:t[1].split("/")[1]}}(this.state.value),a=z(this.state.subjects);this.setState({value:"",clickAdd:!1}),a.push(t),this.setState({subjects:a}),this.saveSubjects(a)}},{key:"removeSubject",value:function(e,t){e.preventDefault();var a=z(this.state.subjects);a.splice(t,1),this.setState({subjects:a}),this.saveSubjects(a)}},{key:"saveSubjects",value:function(e){var t=this;this.userSession.putFile(y,JSON.stringify(e),{encrypt:!1}).finally(function(){window.location.search&&window.history.pushState(null,"",window.location.href.split("?")[0]),C(t,t.userSession,e)})}},{key:"render",value:function(){var e=this,t=this.props.myKingdom,a=this.state.ruler,n=a.animal,i=a.territory,c=this.state.rulerUsername,l=this.state.subjects,s=this.props.myKingdom,o=this.state.app,p=this.state.clickAdd,m=this.props.currentUsername;return r.a.createElement("div",{className:"Kingdom"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12 territory",style:{backgroundImage:"url('".concat(o,"/territories/").concat(i.id,".jpg')")}},n&&n.name?r.a.createElement("img",{className:"rounded-circle",src:"".concat(o,"/animals/").concat(n.id,".jpg"),alt:n.name}):r.a.createElement("img",{className:"rounded-circle",src:"data:image/gif;base64,R0lGODlhAQABAIAAAHd3dwAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==",alt:"The Ruler"}))),r.a.createElement("div",{className:"row ruler"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("h2",null,"Ruler ",c),n?r.a.createElement("p",null,r.a.createElement("a",{href:"".concat("https://explorer.blockstack.org","/name/").concat(c),target:"_blank",rel:"noopener noreferrer"},c)," is a ",n.name," that rules over the ",i.name,"."):r.a.createElement("p",null,c," is an unknown animal that hails from an unknown land."),r.a.createElement("p",null,t?r.a.createElement(S.a,{className:"btn btn-primary",to:"/me",role:"button"},"Edit my animal"):r.a.createElement("a",{className:"btn btn-primary",href:"".concat(window.location.origin,"/kingdom/").concat(m,"?add=").concat(o,"/kingdom/").concat(c)},"Add ruler to my kingdom")),r.a.createElement("div",{className:"container"},r.a.createElement("h2",null,"Subjects"),t?r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{id:"addSubject",className:"add-frame col-lg-8",style:{borderColor:p?"red":"#f8f9fa"}},r.a.createElement("form",{onSubmit:this.addSubject,className:"input-group"},r.a.createElement("input",{className:"form-control",type:"url",onChange:this.handleChange,value:this.state.value,required:!0,placeholder:"https://example.com/kingdom/ruler.id"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Add subject"}))))):null,r.a.createElement("div",{className:"card-deck"},l.map(function(t,a){return r.a.createElement(T,{key:a,index:a,subject:t,removeSubject:e.removeSubject,myKingdom:s,currentUsername:m})}))))))}}]),t}(n.Component)),U=(a(585),function(e){function t(){return Object(s.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.username;return r.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-blue fixed-top"},r.a.createElement(S.a,{className:"navbar-brand",to:"/"},"Animal Kingdom"),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarsExampleDefault"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(S.a,{className:"nav-link",to:"/kingdom/".concat(e)},"Your Kingdom")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(S.a,{className:"nav-link",to:"/animals"},"Animals")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(S.a,{className:"nav-link",to:"/territories"},"Territories")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(S.a,{className:"nav-link",to:"/others"},"Other Kingdoms")))),r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(S.a,{className:"nav-link",to:"/me"},e))),r.a.createElement("button",{className:"btn btn-primary",onClick:this.props.signOut.bind(this)},"Sign out"))}}]),t}(n.Component)),I=(a(586),function(e){function t(){return Object(s.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.type,t=k;return"territories"===e&&(t=b),r.a.createElement("div",{className:"OptionsList container"},r.a.createElement("h2",null,"Available ",e," on this planet"),r.a.createElement("div",{className:"card-deck"},t.map(function(t,a){return r.a.createElement("div",{className:"card"},r.a.createElement("h4",{className:"card-header"},t.name),r.a.createElement("img",{className:"card-img-top",src:"/".concat(e,"/").concat(t.id,".jpg"),alt:t.name}),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"card-title"},t.superpower)))})))}}]),t}(n.Component)),_=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={kingdoms:[]},a.userSession=new d.UserSession({appConfig:h}),a.resolveKingdoms=a.resolveKingdoms.bind(Object(j.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.resolveKingdoms()}},{key:"resolveKingdoms",value:function(){var e=this,t=this.state.kingdoms;g.map(function(a,n){return x(e.userSession,a.ruler,a.app).then(function(r){return t[n]={ruler:{username:a.ruler,data:r},subjects:[],app:a.app},e.setState({kingdoms:t}),M(e.userSession,a.ruler,a.app).then(function(a){t[n].subjects=a,e.setState({subjects:a})}).catch(function(r){console.log("problem loading subjects"),console.log(r),t[n].subjects=[],t[n].error=!0,e.setState({kingdom:a})})}).catch(function(e){console.log("ruler not found"),console.log(e),t[n]={error:!0,ruler:{username:a.ruler,data:null},subjects:[],app:a.app}})})}},{key:"render",value:function(){var e=this.state.kingdoms;return r.a.createElement("div",{className:"OtherKingdoms container"},r.a.createElement("h2",null,"Other kingdoms"),r.a.createElement("div",{className:"list-group"},0===e.length?r.a.createElement("div",{className:"list-group-item list-group-item-action flex-column align-items-start"},r.a.createElement("div",{class:"d-flex w-100 justify-content-between"},r.a.createElement("h5",{class:"mb-1"},"Loading other kingdoms...")),r.a.createElement("p",{class:"mb-1"},"\xa0")):r.a.createElement("div",null,e.map(function(e,t){var a=e.app.split("//")[0],n=e.app.split("//")[1],i=e.app,c=e.error?"":e.ruler,l=c?c.data:"",s=l?l.animal:"";return e.error?r.a.createElement("div",{className:"list-group-item list-group-item-action flex-column align-items-start",key:t},r.a.createElement("div",{class:"d-flex w-100 justify-content-between"},r.a.createElement("h5",{class:"mb-1"},e.ruler.username,"'s kingdom can't be reached")),r.a.createElement("p",{class:"mb-1"},"Is the planet ",i," under siege?")):r.a.createElement(S.a,{className:"list-group-item list-group-item-action flex-column align-items-start",to:"/kingdom/".concat(a,"/").concat(n,"/").concat(e.ruler.username),key:t},r.a.createElement("div",{class:"d-flex w-100 justify-content-between"},r.a.createElement("h5",{class:"mb-1"},e.ruler.username," the ",s?s.name:"","'s kingdom"),r.a.createElement("span",{class:"badge badge-primary badge-pill",title:"Subjects"},e.subjects.length)),r.a.createElement("p",{class:"mb-1"},"From planet ",i))}))))}}]),t}(n.Component),q=(a(587),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(p.a)(this,Object(m.a)(t).call(this,e))).userSession=new d.UserSession({appConfig:h}),a.state={me:{},savingMe:!1,savingKingdown:!1,redirectToMe:!1},a.loadMe=a.loadMe.bind(Object(j.a)(a)),a.saveMe=a.saveMe.bind(Object(j.a)(a)),a.signOut=a.signOut.bind(Object(j.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.loadMe()}},{key:"loadMe",value:function(){var e=this;this.userSession.getFile(f,{decrypt:!1}).then(function(t){if(t){var a=JSON.parse(t);e.setState({me:a,redirectToMe:!1})}else{e.setState({me:null,redirectToMe:!0})}})}},{key:"saveMe",value:function(e){var t=this;this.setState({me:e,savingMe:!0});this.userSession.putFile(f,JSON.stringify(e),{encrypt:!1}).finally(function(){t.setState({savingMe:!1,redirectToMe:!1})})}},{key:"signOut",value:function(e){e.preventDefault(),this.userSession.signUserOut(),window.location="/"}},{key:"render",value:function(){var e=this,t=this.userSession.loadUserData().username,a=this.state.me;return this.state.redirectToMe&&"/me"!==window.location.pathname?r.a.createElement(w.a,{to:"/me"}):"/"===window.location.pathname?r.a.createElement(w.a,{to:"/kingdom/".concat(t)}):r.a.createElement("div",{className:"SignedIn"},r.a.createElement(U,{username:t,signOut:this.signOut}),r.a.createElement(E.a,null,r.a.createElement(O.a,{path:"/animals",render:function(e){return r.a.createElement(I,Object.assign({type:"animals"},e))}}),r.a.createElement(O.a,{path:"/territories",render:function(e){return r.a.createElement(I,Object.assign({type:"territories"},e))}}),r.a.createElement(O.a,{path:"/others",render:function(e){return r.a.createElement(_,Object.assign({type:"territories"},e))}}),r.a.createElement(O.a,{path:"/me",render:function(n){return r.a.createElement(A,Object.assign({me:a,saveMe:e.saveMe,username:t},n))}}),r.a.createElement(O.a,{path:"/kingdom/".concat(t),render:function(e){return r.a.createElement(K,Object.assign({myKingdom:!0,protocol:window.location.protocol,ruler:t,currentUsername:t,realm:window.location.origin.split("//")[1]},e))}}),r.a.createElement(O.a,{path:"/kingdom/:protocol/:realm/:ruler",render:function(e){return r.a.createElement(K,Object.assign({myKingdom:!1,protocol:e.match.params.protocol,realm:e.match.params.realm,ruler:e.match.params.ruler,currentUsername:t},e))}})))}}]),t}(n.Component)),D=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(p.a)(this,Object(m.a)(t).call(this))).userSession=new d.UserSession,e}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this.userSession;!e.isUserSignedIn()&&e.isSignInPending()&&e.handlePendingSignIn().then(function(e){if(!e.username)throw new Error("This app requires a username.");window.location="/kingdom/".concat(e.username)})}},{key:"render",value:function(){return r.a.createElement("main",{role:"main"},this.userSession.isUserSignedIn()?r.a.createElement(q,null):r.a.createElement(v,null))}}]),t}(n.Component),W=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function J(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}a(589);c.a.render(r.a.createElement(l.a,null,r.a.createElement(D,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");W?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):J(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):J(e)})}}()}},[[249,1,2]]]);
//# sourceMappingURL=main.40ce6712.chunk.js.map